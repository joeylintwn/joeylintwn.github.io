"use strict";function esriConverter(){function r(n){var u=0,t=0,f=n.length,r=n[t],i;for(t;t<f-1;t++)i=n[t+1],u+=(i[0]-r[0])*(i[1]+r[1]),r=i;return u>=0}function t(n){var t,e,i,u,f,o;if(n){if(t={},n.x)t.type="Point",i=[n.x,n.y];else if(n.points)t.type="MultiPoint",i=n.points;else if(n.paths)u=n.paths,u.length===1?(t.type="LineString",i=u[0]):(t.type="MultiLineString",i=u);else if(n.rings){for(u=n.rings,f=[],e=0;e<u.length;e++)o=u[e],r(o)?f.push([o]):f[f.length-1].push(o);f.length>1?(i=f,t.type="MultiPolygon"):(i=f.pop(),t.type="Polygon")}t.coordinates=i}return t}function i(n){var i=null,r,u,f;if(n&&(i={type:"Feature"},n.geometry&&(i.geometry=t(n.geometry)),n.attributes)){u={};f=n.attributes;for(r in n.attributes)u[r]=n.attributes[r];i.properties=u}return i}var n={};return n.toGeoJson=function(n){var r,u,f,e;if(n)if(n.features)for(r={type:"FeatureCollection",features:[]},f=n.features,u=0;u<f.length;u++)e=i(f[u]),e&&r.features.push(e);else r=n.geometry?i(n):t(n);return r},n}function geoJsonConverter(){function u(n,t){var i=!1;return(n==="esriGeometryPoint"||n==="esriGeometryMultipoint")&&(t==="Point"||t==="MultiPoint")?i=!0:n==="esriGeometryPolyline"&&(t==="LineString"||t==="MultiLineString")?i=!0:n==="esriGeometryPolygon"&&(t==="Polygon"||t==="MultiPolygon")&&(i=!0),i}function n(n){var t,i;return n==="Point"?t="esriGeometryPoint":n==="MultiPoint"?(t="esriGeometryMultipoint",i="points"):n==="LineString"||n==="MultiLineString"?(t="esriGeometryPolyline",i="paths"):(n==="Polygon"||n==="MultiPolygon")&&(t="esriGeometryPolygon",i="rings"),{type:t,geomHolder:i}}function f(n){var i,t;if(n.type==="MultiPoint"||n.type==="MultiLineString"||n.type==="Polygon")t=n.coordinates;else if(n.type==="Point"||n.type==="LineString")t=[n.coordinates];else if(n.type==="MultiPolygon")for(t=[],i=0;i<n.coordinates.length;i++)t.push(n.coordinates[i]);return t}function i(t){var o,r,i,e,s,h;if(t.type==="GeometryCollection")for(i=[t.geometries.shift()],r=n(i[0].type),e=0;e<t.geometries.length;e++)u(r.type,t.geometries[e].type)&&i.push(t.geometries[e]);else r=n(t.type),i=[t];if(r.type==="esriGeometryPoint"&&i.length>1&&(r=n("MultiPoint")),o={type:r.type,spatialReference:{wkid:4326}},r.type==="esriGeometryPoint")i[0].coordinates.length===0?(o.x=null,o.y=null):(o.x=i[0].coordinates[0],o.y=i[0].coordinates[1]);else for(o[r.geomHolder]=[],e=0;e<i.length;e++)for(h=f(i[e]),s=0;s<h.length;s++)o[r.geomHolder].push(h[s]);return o}function r(n){var t,r,u;if(n&&(t={},n.geometry&&(t.geometry=i(n.geometry)),n.properties)){u={};for(r in n.properties)u[r]=n.properties[r];t.attributes=u}return t}var t={};return t.toEsri=function(n){var t,u,f,e;if(n)if(n.type==="FeatureCollection")for(t={features:[]},f=n.features,u=0;u<f.length;u++)e=r(f[u]),e&&t.features.push(e);else t=n.type==="Feature"?r(n):i(n);return t},t}