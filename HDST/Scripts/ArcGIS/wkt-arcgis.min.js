function WktToPoint(n,t){var r=new WKTUtil,i=r.read(n),u={x:i[0],y:i[1],spatialReference:t};return new esri.geometry.Point(u)}function WktToPolyline(n,t){var i=new WKTUtil,r=i.read(n),u={paths:[r],spatialReference:t};return new esri.geometry.Polyline(u)}function WktToPolygon(n,t){var i=new WKTUtil,r=i.read(n),u={rings:r,spatialReference:t};return new esri.geometry.Polygon(u)}function PointToWKT(n){return console.log(n),"POINT ("+n.x+" "+n.y+")"}function PolygonToWKT(n){var i=[],r=n.rings,u,t,f,e;for(u in r){t=r[u];for(f in t)e=t[f],i.push(e.join(" "))}return"POLYGON (("+i.join(",")+"))"}function LineToWKT(n){var i=[],r=n.paths,u,t,f,e;for(u in r){t=r[u];for(f in t)e=t[f],i.push(e.join(" "))}return"LINESTRING ("+i.join(",")+")"}var WKTUtil=function(n){this.initialize(n)};WKTUtil.prototype={initialize:function(n){this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};for(var t in n)this[t]=n[t]},read:function(n){var r,i,u,t;return n=n.replace(/[\n\r]/g," "),t=this.regExes.typeStr.exec(n),t&&(i=t[1].toLowerCase(),u=t[2],this.parse[i]&&(r=this.parse[i].apply(this,[u]))),r},extractGeometry:function(n){var t=n.CLASS_NAME.split(".")[2].toLowerCase(),i,r;return this.extract[t]?(this.internalProjection&&this.externalProjection&&(n=n.clone(),n.transform(this.internalProjection,this.externalProjection)),i=t=="collection"?"GEOMETRYCOLLECTION":t.toUpperCase(),r=i+"("+this.extract[t].apply(this,[n])+")",r):null},trim:function(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},parse:{point:function(n){return this.trim(n).split(this.regExes.spaces)},multipoint:function(n){for(var i,r=this.trim(n).split(","),u=[],t=0,f=r.length;t<f;++t)i=r[t].replace(this.regExes.trimParens,"$1"),u.push(this.parse.point.apply(this,[i]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(u))},linestring:function(n){for(var i=this.trim(n).split(","),r=[],t=0,u=i.length;t<u;++t)r.push(this.parse.point.apply(this,[i[t]]));return r},multilinestring:function(n){for(var i,r=OpenLayers.String.trim(n).split(this.regExes.parenComma),u=[],t=0,f=r.length;t<f;++t)i=r[t].replace(this.regExes.trimParens,"$1"),u.push(this.parse.linestring.apply(this,[i]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(u))},polygon:function(n){for(var i,r,u=this.trim(n).split(this.regExes.parenComma),f=[],t=0,e=u.length;t<e;++t)i=u[t].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[i]),f.push(r);return f}}};